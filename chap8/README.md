HighPerformance
=============

HighPerformance


## 8

* モバイルコンテンツのパフォーマンスの制限
	* フォームファクター (アプリの動作)
	* 無線IFの特性 (ネットワークの強弱や遅延)
	* バッテリ持続時間

* 3つのバランスを取る。どれかを無視するなどはしない

## 8.1 バッテリを抑える

* 原則
	* フルパワーの無線は数時間でバッテリが枯渇する
	* 規格が上がれば無線出力も上がる
	* ディスプレイの次に無線がバッテリを消費する
	* データ転送量と無線エネルギー消費量は比例しない
* 無線IFの使用を抑える
* WiFiとモバイル回線で電力消費量は異なる

## 8.2

* 電力消費の小さなデータ転送は存在しない
* ルール
	* ポーリングは高コスト
	* プッシュ配信・プッシュ通知を使用する
	* データ送受信はまとめられるべき
	* 重要度が低いデータは送信を控える

* コラム
	* ネイティブアプリは固有のプッシュ配信が利用可能
	* webアプリはSSEやWebSocketでレイテンシとプロトコルオーバーヘッドを最小化できる

* 不要なTCP,UDPのキープアライブは排除する

## 8.3

* HTTPリクエスト
	* HTTP自体の往復、DNS, TCP, TLS, RRC

* RRC
	* データ送受信の際に状態遷移する
	* タイムアウトするとアイドル状態へ遷移する

## 8.4

* モバイルネットワークではレイテンシは予測できない。計測した通信容量を再利用しない

* 計画
	* エラーは起きるものとして再送を計画する
	* リトライはバックオフアルゴリズムを使用する。永遠に繰り返すことはしない
	* オフラインのときは送信リクエストを保存して後で送信
	* HTML5AppCache, localStorageを利用

## 8.5

* モバイル通信はバースト的な通信に最適化されている。プログレッシブな通信は害が多い
* ストリーミングでなくファイル全体をダウンロードする
* 計測や統計モデルを利用してコンテンツを事前にロードする
	* 広告などはプリフェッチする
* 断続的な送受信は排除する


## 8.6

* 4G vs WiFi
	* WiFiのほうが大容量の転送においてバッテリ効率ですぐれている
* WiFi接続を促す

## 8.7 

* エンド間の通信ではスタック全体を考慮する
* 8章まとめ
	* RRC
	* バッテリ
	* ルーティングの遅延
	* TCP, UDP, TLSも最適化する





